Title: Create a new GtkWidget in C
Input[Basename]: "my-widget"
Input[Namespace]: "My"
Input[Class]: "Widget"
Input[ParentType]: "GtkWidget"
Input[Final]: true

```
require GLib
```

```{{Basename}}.h
{{include "license.h"}}

#pragma once

#include <gtk/gtk.h>

G_BEGIN_DECLS

#define {{Namespace.mangle().upper()}}_TYPE_{{Class.mangle().upper()}} ({{Namespace.mangle().lower()}}_{{Class.mangle().lower()}}_get_type())

{{if Final}}
G_DECLARE_FINAL_TYPE ({{Namespace}}{{Class}}, {{Namespace.mangle().lower()}}_{{Class.mangle().lower()}}, {{Namespace.mangle().upper()}}, {{Class.mangle().upper()}}, {{ParentType}})

GtkWidget *{{Namespace.mangle().lower()}}_{{Class.mangle().lower()}}_new (void);
{{else}}
G_DECLARE_DERIVABLE_TYPE ({{Namespace}}{{Class}}, {{Namespace.mangle().lower()}}_{{Class.mangle().lower()}}, {{Namespace.mangle().upper()}}, {{Class.mangle().upper()}}, {{ParentType}})

struct _{{Namespace}}{{Class}}Class
{
  {{ParentType}}Class parent_class;
};
{{end}}

G_END_DECLS
```

```{{Basename}}.c
{{include "license.c"}}

#include "config.h"

#include "{{Basename}}.h"

{{if Final}}
struct _{{Namespace}}{{Class}}
{
  {{ParentType}} parent_instance;
};

G_DEFINE_FINAL_TYPE ({{Namespace}}{{Class}}, {{Namespace.mangle().lower()}}_{{Class.mangle().lower()}}, {{GLib.strjoinv("_TYPE_", GLib.strsplit(ParentType.mangle(), "_", i32(2))).upper()}})
{{else}}
typedef struct
{
  gpointer first_field;
} {{Namespace}}{{Class}}Private;

G_DEFINE_TYPE_WITH_PRIVATE ({{Namespace}}{{Class}}, {{Namespace.mangle().lower()}}_{{Class.mangle().lower()}}, {{GLib.strjoinv("_TYPE_", GLib.strsplit(ParentType.mangle(), "_", i32(2))).upper()}})
{{end}}

static void
{{Namespace.mangle().lower()}}_{{Class.mangle().lower()}}_dispose (GObject *object)
{
  gtk_widget_dispose_template (GTK_WIDGET (object), {{Namespace.mangle().upper()}}_TYPE_{{Class.mangle().upper()}});

  G_OBJECT_CLASS ({{Namespace.mangle().lower()}}_{{Class.mangle().lower()}}_parent_class)->dispose (object);
}

static void
{{Namespace.mangle().lower()}}_{{Class.mangle().lower()}}_class_init ({{Namespace}}{{Class}}Class *klass)
{
  GObjectClass *object_class = G_OBJECT_CLASS (klass);
  GtkWidgetClass *widget_class = GTK_WIDGET_CLASS (klass);

  object_class->dispose = {{Namespace.mangle().lower()}}_{{Class.mangle().lower()}}_dispose;

  gtk_widget_class_set_template_from_resource (widget_class, "/ui/{{Basename}}.ui");
  gtk_widget_class_set_layout_manager_type (widget_class, GTK_TYPE_BIN_LAYOUT);
}

static void
{{Namespace.mangle().lower()}}_{{Class.mangle().lower()}}_init ({{Namespace}}{{Class}} *self)
{
  gtk_widget_init_template (GTK_WIDGET (self));
}
{{if Final}}

GtkWidget *
{{Namespace.mangle().lower()}}_{{Class.mangle().lower()}}_new (void)
{
  return g_object_new ({{Namespace.mangle().upper()}}_TYPE_{{Class.mangle().upper()}}, NULL);
}
{{end}}
```

```{{Basename}}.ui
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <template class="{{Namespace}}{{Class}}" parent="{{ParentType}}">
  </template>
</interface>
```
